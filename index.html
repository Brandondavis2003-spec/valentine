<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>üíå Will you be my Valentine?</title>
  <style>
    :root{
      --bg1:#ffedf3;
      --bg2:#ffe2ea;
      --card:#ffffffcc;
      --text:#2b2b2b;
      --yes:#ff4d7d;
      --yes2:#ff2f68;
      --no:#6b7280;
      --shadow: 0 20px 60px rgba(0,0,0,.12);
      --radius: 24px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 20% 20%, #fff 0%, transparent 60%),
        radial-gradient(900px 600px at 80% 80%, #fff 0%, transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* floating hearts */
    .hearts{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.55;
      filter: blur(.1px);
    }
    .heart{
      position:absolute;
      font-size:18px;
      animation: floatUp linear infinite;
      transform: translateY(110vh);
    }
    @keyframes floatUp{
      0%{ transform: translateY(110vh) translateX(0) rotate(0deg); opacity:0;}
      10%{opacity:1;}
      100%{ transform: translateY(-20vh) translateX(80px) rotate(18deg); opacity:0;}
    }

    .card{
      width:min(720px, 92vw);
      padding:28px 28px 22px;
      background:var(--card);
      border:1px solid rgba(255,255,255,.7);
      backdrop-filter: blur(10px);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      position:relative;
    }

    .title{
      text-align:center;
      font-size: clamp(28px, 3.6vw, 44px);
      line-height:1.05;
      margin: 8px 0 10px;
      letter-spacing:-0.02em;
    }
    .subtitle{
      text-align:center;
      font-size: clamp(14px, 1.6vw, 16px);
      opacity:.8;
      margin: 0 0 18px;
    }

    .stage{
      position:relative;
      height: 240px;
      border-radius: 18px;
      background: rgba(255,255,255,.55);
      border: 1px dashed rgba(255,77,125,.35);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 16px;
    }

    .buttons{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
      padding-top:16px;
    }

    button{
      border:none;
      border-radius: 999px;
      padding: 14px 22px;
      font-size: 16px;
      cursor:pointer;
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      user-select:none;
      touch-action: manipulation;
    }
    button:active{ transform: scale(.98); }

    #yesBtn{
      background: linear-gradient(135deg, var(--yes), var(--yes2));
      color:white;
      font-weight:700;
    }
    #yesBtn:hover{ filter: brightness(1.03); box-shadow: 0 14px 30px rgba(255,77,125,.28); }

    #noBtn{
      background: #eef2f7;
      color: #4b5563;
      font-weight:700;
      position:absolute; /* will be moved around inside the stage */
      left: 50%;
      top: 58%;
      transform: translate(-50%,-50%);
    }
    #noBtn:hover{ box-shadow: 0 14px 30px rgba(0,0,0,.14); }

    .cute{
      position:absolute;
      bottom:14px;
      width:100%;
      text-align:center;
      font-size:13px;
      opacity:.7;
    }

    .result{
      display:none;
      text-align:center;
      padding: 10px 8px 0;
    }
    .result h2{
      margin: 10px 0 4px;
      font-size: clamp(22px, 3vw, 32px);
    }
    .result p{
      margin: 0;
      opacity:.85;
      font-size: 15px;
    }

    /* confetti canvas */
    canvas{
      position:fixed;
      inset:0;
      pointer-events:none;
    }

    /* mobile hint */
    .hint{
      margin-top: 10px;
      font-size: 12px;
      text-align:center;
      opacity:.65;
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <canvas id="confetti"></canvas>

  <div class="card" role="main">
    <div class="title">Will you be my Valentine? üíò</div>
    <div class="subtitle">I‚Äôm asking nicely‚Ä¶ but I‚Äôm also very determined üòå</div>

    <div class="stage" id="stage" aria-label="Valentine question area">
      <div class="result" id="result">
        <h2>YAYYYYY!!! üíñü•π</h2>
        <p>Okay perfect. It‚Äôs official. I love you.</p>
        <p style="margin-top:8px; font-size:14px; opacity:.75;">
          (Screenshot this so I can frame your answer üòè)
        </p>
      </div>

      <button id="noBtn" aria-label="No">No</button>
    </div>

    <div class="buttons">
      <button id="yesBtn" aria-label="Yes">Yes üíû</button>
    </div>

    <div class="hint">Tip: try hovering (or tapping) ‚ÄúNo.‚Äù Good luck üòá</div>
    <div class="cute">Made with love üíå</div>
  </div>

  <script>
    // --- floating hearts background ---
    const heartsWrap = document.getElementById("hearts");
    const heartChars = ["üíó","üíñ","üíò","üíù","üíì","üíï"];
    function spawnHeart(){
      const s = document.createElement("div");
      s.className = "heart";
      s.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
      const left = Math.random()*100;
      const dur = 6 + Math.random()*8;
      const size = 14 + Math.random()*18;
      s.style.left = left + "vw";
      s.style.animationDuration = dur + "s";
      s.style.fontSize = size + "px";
      s.style.opacity = (0.35 + Math.random()*0.55).toFixed(2);
      heartsWrap.appendChild(s);
      setTimeout(()=>s.remove(), dur*1000);
    }
    for(let i=0;i<18;i++) setTimeout(spawnHeart, i*250);
    setInterval(spawnHeart, 450);

    // --- runaway "No" button logic ---
    const stage = document.getElementById("stage");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const result = document.getElementById("result");

    let dodgeLevel = 0;

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function moveNoButton(nearX=null, nearY=null){
      const rStage = stage.getBoundingClientRect();
      const rNo = noBtn.getBoundingClientRect();

      const padding = 14;
      const maxX = rStage.width - rNo.width - padding;
      const maxY = rStage.height - rNo.height - padding;

      // If we know pointer position, prefer moving away from it.
      let x = Math.random() * maxX;
      let y = Math.random() * maxY;

      if(nearX !== null && nearY !== null){
        const px = nearX - rStage.left;
        const py = nearY - rStage.top;

        // Try a few candidates and pick the farthest from pointer.
        let best = {x, y, d:-1};
        for(let i=0;i<10;i++){
          const cx = Math.random()*maxX;
          const cy = Math.random()*maxY;
          const dx = (cx + rNo.width/2) - px;
          const dy = (cy + rNo.height/2) - py;
          const d = dx*dx + dy*dy;
          if(d > best.d) best = {x:cx, y:cy, d};
        }
        x = best.x; y = best.y;
      }

      x = clamp(x, padding, maxX);
      y = clamp(y, padding, maxY);

      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "translate(0,0)";
    }

    // Make it dodge when hovered (desktop)
    noBtn.addEventListener("mouseenter", (e) => {
      dodgeLevel++;
      moveNoButton(e.clientX, e.clientY);
      // After a few dodges, start changing the text for extra cuteness.
      if(dodgeLevel === 3) noBtn.textContent = "Nice try";
      if(dodgeLevel === 6) noBtn.textContent = "Nope üòá";
      if(dodgeLevel === 9) noBtn.textContent = "C'mon";
      if(dodgeLevel >= 12) noBtn.textContent = "Just say yes üíó";
    });

    // Also dodge if clicked or tapped (mobile)
    noBtn.addEventListener("pointerdown", (e) => {
      dodgeLevel++;
      moveNoButton(e.clientX, e.clientY);
      e.preventDefault();
    });

    // Optional: if they try to keyboard-focus "No", relocate it (because you're evil)
    noBtn.addEventListener("focus", () => moveNoButton());

    // --- YES celebration ---
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");

    function resize(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener("resize", resize);
    resize();

    let confetti = [];
    function popConfetti(){
      const count = 180;
      for(let i=0;i<count;i++){
        confetti.push({
          x: window.innerWidth/2,
          y: window.innerHeight/2 - 80,
          vx: (Math.random()-0.5)*10,
          vy: (Math.random()-1.2)*10,
          g: 0.22 + Math.random()*0.18,
          r: 3 + Math.random()*5,
          a: 1,
          spin: (Math.random()-0.5)*0.2,
          rot: Math.random()*Math.PI*2
        });
      }
      requestAnimationFrame(tick);
      setTimeout(()=>{ confetti = []; ctx.clearRect(0,0,canvas.width,canvas.height); }, 2200);
    }

    function tick(){
      ctx.clearRect(0,0,window.innerWidth,window.innerHeight);

      confetti.forEach(p=>{
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.spin;
        p.a *= 0.985;
      });

      // draw as little rectangles
      confetti.forEach(p=>{
        ctx.save();
        ctx.globalAlpha = p.a;
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
        ctx.restore();
      });

      confetti = confetti.filter(p => p.a > 0.08 && p.y < window.innerHeight + 40);
      if(confetti.length) requestAnimationFrame(tick);
    }

    yesBtn.addEventListener("click", () => {
      // Hide the No button and show result message.
      noBtn.style.display = "none";
      result.style.display = "block";
      stage.style.borderStyle = "solid";
      stage.style.borderColor = "rgba(255,77,125,.35)";
      stage.style.background = "rgba(255,255,255,.75)";
      popConfetti();
    });

    // Place "No" initially in a nice spot within the stage.
    // Using absolute positioning inside stage requires stage to be offsetParent.
    stage.style.position = "relative";
    noBtn.style.position = "absolute";
    // Start centered-ish
    noBtn.style.left = "50%";
    noBtn.style.top  = "62%";
    noBtn.style.transform = "translate(-50%,-50%)";
  </script>
</body>
</html>
